<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Events - Batangas Explorer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #003366;
            --accent: #ff7e00;
            --light-bg: #f8f9fa;
            --shadow-light: 0 4px 15px rgba(0,0,0,0.08);
            --shadow-medium: 0 8px 25px rgba(0,0,0,0.12);
            --transition: all 0.3s ease;
            --gradient-primary: linear-gradient(135deg, #003366 0%, #004080 100%);
            --gradient-accent: linear-gradient(135deg, #ff7e00 0%, #ff9500 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f5f5;
            line-height: 1.6;
        }

        html {
            scroll-behavior: smooth;
        }

        /* Navigation */
        .navbar {
            background-color: var(--primary);
            padding: 1rem 0;
            box-shadow: var(--shadow-medium);
            transition: var(--transition);
        }

        .navbar.scrolled {
            padding: 0.7rem 0;
            backdrop-filter: blur(10px);
        }

        .navbar-brand {
            font-weight: 700;
            font-size: 1.5rem;
            color: white !important;
            transition: transform 0.3s ease;
        }

        .navbar-brand:hover {
            transform: translateY(-1px);
        }

        .navbar-brand img {
            margin-right: 10px;
        }

        .nav-link {
            color: white !important;
            font-weight: 500;
            padding: 0.5rem 1rem;
            position: relative;
            transition: var(--transition);
            border-radius: 5px;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 2px;
            background-color: var(--accent);
            transition: var(--transition);
            transform: translateX(-50%);
        }

        .nav-link:hover::after,
        .nav-link.active::after {
            width: 70%;
        }

        .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: translateY(-1px);
        }

        /* Hero Section */
        .page-hero {
            background: var(--gradient-primary);
            color: white;
            padding: 8rem 0 4rem;
            margin-top: 76px;
            position: relative;
            overflow: hidden;
        }

        .page-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('https://images.unsplash.com/photo-1492684223066-81342ee5ff30?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80') center/cover;
            opacity: 0.1;
            z-index: 0;
        }

        .page-hero .container {
            position: relative;
            z-index: 1;
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.3);
            animation: fadeInUp 1s ease-out;
        }

        .hero-subtitle {
            font-size: 1.3rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
            animation: fadeInUp 1s ease-out 0.3s both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Filter Section */
        .filter-section {
            background: white;
            padding: 2rem 0;
            box-shadow: var(--shadow-light);
            margin-bottom: 2rem;
            position: sticky;
            top: 76px;
            z-index: 100;
        }

        .filter-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
        }

        .filter-btn {
            background: white;
            border: 2px solid var(--primary);
            color: var(--primary);
            padding: 0.6rem 1.5rem;
            border-radius: 25px;
            font-weight: 600;
            transition: var(--transition);
            cursor: pointer;
            font-size: 0.9rem;
        }

        .filter-btn:hover,
        .filter-btn.active {
            background: var(--gradient-primary);
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow-light);
        }

        .search-box {
            position: relative;
            min-width: 250px;
        }

        .search-input {
            width: 100%;
            padding: 0.6rem 1rem 0.6rem 2.5rem;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            font-size: 0.9rem;
            transition: var(--transition);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(255, 126, 0, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
        }

        /* Event Cards */
        .events-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .event-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            height: fit-content;
            opacity: 0;
            transform: translateY(30px);
        }

        .event-card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .event-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-medium);
        }

        .event-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
            transition: transform 0.4s ease;
        }

        .event-card:hover .event-image {
            transform: scale(1.05);
        }

        .event-content {
            padding: 1.8rem;
        }

        .event-date-badge {
            display: inline-flex;
            align-items: center;
            background: var(--gradient-accent);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.85rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 8px rgba(255, 126, 0, 0.3);
        }

        .event-date-badge i {
            margin-right: 0.5rem;
        }

        .event-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.8rem;
            line-height: 1.3;
        }

        .event-location {
            display: flex;
            align-items: center;
            color: #666;
            margin-bottom: 0.8rem;
            font-size: 0.9rem;
        }

        .event-location i {
            color: var(--accent);
            margin-right: 0.5rem;
            width: 16px;
        }

        .event-description {
            color: #666;
            margin-bottom: 1.2rem;
            line-height: 1.6;
        }

        .event-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .event-tag {
            background: rgba(255, 126, 0, 0.1);
            color: var(--accent);
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 500;
            border: 1px solid rgba(255, 126, 0, 0.2);
        }

        .event-details {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding-top: 1rem;
            border-top: 1px solid #f0f0f0;
        }

        .event-price {
            font-weight: 700;
            color: var(--primary);
            font-size: 1.1rem;
        }

        .event-price.free {
            color: #28a745;
        }

        .btn-event {
            background: var(--gradient-accent);
            border: none;
            color: white;
            padding: 0.6rem 1.5rem;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
            transition: var(--transition);
            text-decoration: none;
            display: inline-block;
        }

        .btn-event:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 126, 0, 0.4);
            color: white;
        }

        /* Featured Event */
        .featured-event {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--shadow-medium);
            margin-bottom: 3rem;
            position: relative;
        }

        .featured-badge {
            position: absolute;
            top: 1.5rem;
            left: 1.5rem;
            background: var(--gradient-accent);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.85rem;
            z-index: 2;
            box-shadow: 0 2px 8px rgba(255, 126, 0, 0.3);
        }

        .featured-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            min-height: 400px;
        }

        .featured-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .featured-info {
            padding: 3rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .featured-date {
            color: var(--accent);
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }

        .featured-title {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 1rem;
            line-height: 1.2;
        }

        .featured-description {
            color: #666;
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .featured-location {
            display: flex;
            align-items: center;
            color: #666;
            margin-bottom: 2rem;
            font-size: 1rem;
        }

        .featured-location i {
            color: var(--accent);
            margin-right: 0.8rem;
            font-size: 1.2rem;
        }

        /* No Results */
        .no-results {
            text-align: center;
            padding: 4rem 2rem;
            color: #666;
        }

        .no-results i {
            font-size: 4rem;
            color: #ddd;
            margin-bottom: 1rem;
        }

        .no-results h3 {
            color: var(--primary);
            margin-bottom: 1rem;
        }

        /* Calendar View Toggle */
        .view-toggle {
            display: flex;
            background: white;
            border-radius: 25px;
            border: 2px solid var(--primary);
            overflow: hidden;
        }

        .view-btn {
            background: none;
            border: none;
            padding: 0.6rem 1.2rem;
            color: var(--primary);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .view-btn.active {
            background: var(--gradient-primary);
            color: white;
        }

        /* Loading Animation */
        .loading-container {
            display: none;
            text-align: center;
            padding: 2rem;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }

            .filter-controls {
                flex-direction: column;
                align-items: stretch;
            }

            .search-box {
                min-width: auto;
                width: 100%;
            }

            .events-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .featured-content {
                grid-template-columns: 1fr;
            }

            .featured-info {
                padding: 2rem;
            }

            .featured-title {
                font-size: 1.8rem;
            }

            .filter-section {
                position: static;
            }
        }

        @media (max-width: 576px) {
            .page-hero {
                padding: 6rem 0 3rem;
            }

            .hero-title {
                font-size: 2rem;
            }

            .hero-subtitle {
                font-size: 1.1rem;
            }

            .event-content {
                padding: 1.5rem;
            }

            .featured-info {
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg fixed-top" id="navbar">
        <div class="container">
            <a class="navbar-brand" href="TOURIST_Home.html">
                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Crect width='40' height='40' rx='5' fill='%23ff7e00'/%3E%3Ctext x='20' y='26' font-family='Arial' font-size='18' font-weight='bold' text-anchor='middle' fill='white'%3EB%3C/text%3E%3C/svg%3E" alt="Batangas Explorer Logo" width="40" height="40">
                Batangas Explorer
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="TOURIST_Home.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="TOURIST_Destination.html">Destinations</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="TOURIST_Map.html">Map</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="TOURIST_Event.html">Events</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="TOURIST_About.html">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="TOURIST_Contact.html">Contact</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Page Hero -->
    <section class="page-hero">
        <div class="container text-center">
            <h1 class="hero-title">Events & Festivals</h1>
            <p class="hero-subtitle">Discover exciting events, cultural festivals, and amazing experiences happening across Batangas Province throughout the year.</p>
        </div>
    </section>

    <!-- Filter Section -->
    <section class="filter-section">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-8">
                    <div class="filter-controls">
                        <button class="filter-btn active" data-filter="all">All Events</button>
                        <button class="filter-btn" data-filter="festival">Festivals</button>
                        <button class="filter-btn" data-filter="cultural">Cultural</button>
                        <button class="filter-btn" data-filter="sports">Sports</button>
                        <button class="filter-btn" data-filter="food">Food & Culinary</button>
                        <button class="filter-btn" data-filter="nature">Nature & Adventure</button>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="d-flex gap-2">
                        <div class="search-box flex-grow-1">
                            <i class="fas fa-search search-icon"></i>
                            <input type="text" class="search-input" placeholder="Search events..." id="searchInput">
                        </div>
                        <div class="view-toggle">
                            <button class="view-btn active" data-view="grid"><i class="fas fa-th"></i></button>
                            <button class="view-btn" data-view="list"><i class="fas fa-list"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <div class="container my-5">
        <!-- Featured Event Section (will be populated by JavaScript) -->
        <div id="featuredEventContainer"></div>

        <!-- Events Grid -->
        <div class="events-grid" id="eventsGrid"></div>

        <!-- Loading Indicator -->
        <div class="loading-container" id="loadingIndicator">
            <div class="loading-spinner"></div>
            <p>Loading events...</p>
        </div>

        <!-- No Results Message -->
        <div class="no-results" id="noResults" style="display: none;">
            <i class="fas fa-search"></i>
            <h3>No Events Found</h3>
            <p>Try adjusting your search criteria or browse all events to discover exciting activities in Batangas.</p>
        </div>
    </div>

    <!-- Footer -->
    <footer id="contact">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4 mb-lg-0">
                    <h5 class="footer-title">Batangas Explorer</h5>
                    <p>Your ultimate guide to discovering the natural wonders, cultural treasures, and culinary delights of Batangas Province. From pristine beaches to historical landmarks, we help you explore the best of what Batangas has to offer.</p>
                    <div class="social-icons">
                        <a href="#" class="social-icon" title="Follow us on Facebook">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="social-icon" title="Follow us on Twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="social-icon" title="Follow us on Instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="social-icon" title="Subscribe to our YouTube">
                            <i class="fab fa-youtube"></i>
                        </a>
                    </div>
                </div>
                <div class="col-lg-2 col-md-4 mb-4 mb-md-0">
                    <h5 class="footer-title">Popular Destinations</h5>
                    <ul class="footer-links">
                        <li><a href="TOURIST_Destination.html">Taal Volcano Island</a></li>
                        <li><a href="TOURIST_Destination.html">Anilao Diving Sites</a></li>
                        <li><a href="TOURIST_Destination.html">Fortune Island</a></li>
                        <li><a href="TOURIST_Destination.html">Mount Batulao</a></li>
                        <li><a href="TOURIST_Destination.html">Calatagan Beaches</a></li>
                        <li><a href="TOURIST_Destination.html">Taal Heritage Town</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-md-4 mb-4 mb-md-0">
                    <h5 class="footer-title">Quick Links</h5>
                    <ul class="footer-links">
                        <li><a href="#">Travel Guidelines</a></li>
                        <li><a href="#">Transportation Guide</a></li>
                        <li><a href="#">Weather Updates</a></li>
                        <li><a href="#">Emergency Contacts</a></li>
                        <li><a href="#">Tourism Offices</a></li>
                        <li><a href="#">Hotel Bookings</a></li>
                    </ul>
                </div>
                <div class="col-lg-4 col-md-4">
                    <h5 class="footer-title">Visit Batangas</h5>
                    <ul class="footer-links">
                        <li><i class="fas fa-map-marker-alt me-2"></i> Provincial Capitol Complex, Batangas City</li>
                        <li><i class="fas fa-phone me-2"></i> Hotline: (043) 980-2020</li>
                        <li><i class="fas fa-envelope me-2"></i> tourism@batangas.gov.ph</li>
                        <li><i class="fas fa-clock me-2"></i> Mon-Fri: 8:00 AM - 5:00 PM</li>
                        <li><i class="fas fa-globe me-2"></i> www.batangastourism.com</li>
                    </ul>
                    <div class="mt-3">
                        <small class="text-muted">Official tourism website of Batangas Province</small>
                    </div>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2025 Batangas Explorer. All rights reserved. | Provincial Tourism and Cultural Affairs Office</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Global variables
        let allEvents = [];
        let filteredEvents = [];
        let currentFilter = 'all';
        let currentSearch = '';
        let currentView = 'grid';

        // DOM elements
        const eventsGrid = document.getElementById('eventsGrid');
        const featuredEventContainer = document.getElementById('featuredEventContainer');
        const filterButtons = document.querySelectorAll('.filter-btn');
        const viewButtons = document.querySelectorAll('.view-btn');
        const searchInput = document.getElementById('searchInput');
        const noResults = document.getElementById('noResults');
        const loadingIndicator = document.getElementById('loadingIndicator');

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            fetchEvents();
            setupEventListeners();
        });

        // Fetch events from API
        async function fetchEvents() {
            try {
                showLoading(true);

                // Fetch both featured event and regular events
                const [featuredResponse, eventsResponse] = await Promise.all([
                    fetch('/api/events/featured'),
                    fetch('/api/events')
                ]);

                const featuredData = await featuredResponse.json();
                const eventsData = await eventsResponse.json();

                if (featuredData.success && eventsData.success) {
                    // Process featured event
                    if (featuredData.featured_event) {
                        renderFeaturedEvent(featuredData.featured_event);
                    }

                    // Process regular events
                    allEvents = eventsData.events || [];
                    filteredEvents = allEvents;
                    renderEvents();
                } else {
                    console.error('Failed to load events:', featuredData.error || eventsData.error);
                }
            } catch (error) {
                console.error('Error fetching events:', error);
            } finally {
                showLoading(false);
            }
        }

        // Render featured event
        function renderFeaturedEvent(featuredEvent) {
            featuredEventContainer.innerHTML = `
                <div class="featured-event" data-category="${featuredEvent.category || 'festival'}">
                    <div class="featured-badge">
                        <i class="fas fa-star me-1"></i>Featured Event
                    </div>
                    <div class="featured-content">
                        <img src="${featuredEvent.image_url || 'https://images.unsplash.com/photo-1533174072545-7a4b6ad7a6c3?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80'}"
                             alt="${featuredEvent.title}" class="featured-image">
                        <div class="featured-info">
                            <div class="featured-date">
                                <i class="fas fa-calendar-alt me-2"></i>${featuredEvent.date_display}
                            </div>
                            <h2 class="featured-title">${featuredEvent.title}</h2>
                            <p class="featured-description">${featuredEvent.description}</p>
                            <div class="featured-location">
                                <i class="fas fa-map-marker-alt"></i>
                                ${featuredEvent.location}
                            </div>
                            <a href="#" class="btn-event" onclick="showEventDetails(${featuredEvent.event_id})">
                                <i class="fas fa-ticket-alt me-2"></i>Get Details
                            </a>
                        </div>
                    </div>
                </div>
            `;
        }

        // Render events grid
        function renderEvents() {
            if (filteredEvents.length === 0) {
                noResults.style.display = 'block';
                eventsGrid.style.display = 'none';
                return;
            }

            noResults.style.display = 'none';
            eventsGrid.style.display = 'grid';

            eventsGrid.innerHTML = filteredEvents.map(event => `
                <div class="event-card" data-category="${event.category || 'general'}">
                    <img src="${event.image_url || 'https://images.unsplash.com/photo-1492684223066-81342ee5ff30?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80'}"
                         alt="${event.title}" class="event-image">
                    <div class="event-content">
                        <div class="event-date-badge">
                            <i class="fas fa-calendar-alt"></i>${event.date_display}
                        </div>
                        <h3 class="event-title">${event.title}</h3>
                        <div class="event-location">
                            <i class="fas fa-map-marker-alt"></i>${event.location}, ${event.municipality}
                        </div>
                        <p class="event-description">${event.description.substring(0, 150)}...</p>
                        <div class="event-tags">
                            <span class="event-tag">${event.category || 'Event'}</span>
                            ${event.is_ongoing ? '<span class="event-tag">Ongoing</span>' : ''}
                            ${event.is_upcoming ? '<span class="event-tag">Upcoming</span>' : ''}
                        </div>
                        <div class="event-details">
                            <div class="event-price ${event.is_free ? 'free' : ''}">
                                ${event.is_free ? 'FREE' : 'From â‚±500'}
                            </div>
                            <a href="#" class="btn-event" onclick="showEventDetails(${event.event_id})">
                                ${event.is_free ? 'Learn More' : 'Get Tickets'}
                            </a>
                        </div>
                    </div>
                </div>
            `).join('');

            // Animate cards
            setTimeout(() => {
                document.querySelectorAll('.event-card').forEach((card, index) => {
                    setTimeout(() => {
                        card.classList.add('visible');
                    }, index * 100);
                });
            }, 50);
        }

        // Filter events based on current filter and search
        function filterEvents() {
            filteredEvents = allEvents.filter(event => {
                // Filter by category
                const matchesCategory = currentFilter === 'all' ||
                                      (event.category && event.category.toLowerCase().includes(currentFilter.toLowerCase()));

                // Filter by search
                const matchesSearch = currentSearch === '' ||
                                    (event.title && event.title.toLowerCase().includes(currentSearch)) ||
                                    (event.description && event.description.toLowerCase().includes(currentSearch)) ||
                                    (event.location && event.location.toLowerCase().includes(currentSearch)) ||
                                    (event.municipality && event.municipality.toLowerCase().includes(currentSearch));

                return matchesCategory && matchesSearch;
            });

            renderEvents();
        }

        // Setup event listeners
        function setupEventListeners() {
            // Filter buttons
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    currentFilter = this.dataset.filter;
                    filterEvents();
                });
            });

            // View toggle buttons
            viewButtons.forEach(button => {
                button.addEventListener('click', function() {
                    viewButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    currentView = this.dataset.view;
                    updateView();
                });
            });

            // Search input
            searchInput.addEventListener('input', function() {
                currentSearch = this.value.toLowerCase();
                filterEvents();
            });

            // Navbar scroll effect
            window.addEventListener('scroll', function() {
                const navbar = document.getElementById('navbar');
                if (window.scrollY > 100) {
                    navbar.classList.add('scrolled');
                } else {
                    navbar.classList.remove('scrolled');
                }
            });
        }

        // Update view (grid/list)
        function updateView() {
            if (currentView === 'list') {
                eventsGrid.style.gridTemplateColumns = '1fr';
                eventsGrid.style.maxWidth = '800px';
                eventsGrid.style.margin = '0 auto 3rem';
            } else {
                eventsGrid.style.gridTemplateColumns = 'repeat(auto-fit, minmax(350px, 1fr))';
                eventsGrid.style.maxWidth = 'none';
                eventsGrid.style.margin = '0 0 3rem 0';
            }
        }

        // Show event details modal
        function showEventDetails(eventId) {
            // This would typically fetch detailed event info and show a modal
            // For now, we'll just show an alert
            const event = allEvents.find(e => e.event_id === eventId);
            if (event) {
                alert(`Event Details:\n\n${event.title}\n\n${event.description}\n\nLocation: ${event.location}, ${event.municipality}\n\nDate: ${event.date_display}`);
            } else {
                alert('Event details will be shown here. This would typically open a modal with more information.');
            }
        }

        // Show/hide loading indicator
        function showLoading(show) {
            loadingIndicator.style.display = show ? 'block' : 'none';
        }

        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Footer styles
        const footerStyles = `
            footer {
                background-color: var(--primary);
                padding: 3rem 0 1.5rem;
                color: rgba(255, 255, 255, 0.8);
                margin-top: 3rem;
            }

            .footer-title {
                color: white;
                font-weight: 600;
                margin-bottom: 1.5rem;
                font-size: 1.2rem;
            }

            .footer-links {
                list-style: none;
                padding: 0;
            }

            .footer-links li {
                margin-bottom: 0.8rem;
            }

            .footer-links a {
                color: rgba(255, 255, 255, 0.8);
                text-decoration: none;
                transition: var(--transition);
            }

            .footer-links a:hover {
                color: var(--accent);
                padding-left: 8px;
            }

            .social-icons {
                display: flex;
                gap: 10px;
                margin-top: 1rem;
            }

            .social-icon {
                width: 42px;
                height: 42px;
                background-color: rgba(255, 255, 255, 0.1);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: var(--transition);
                color: white;
                text-decoration: none;
            }

            .social-icon:hover {
                background-color: var(--accent);
                transform: translateY(-2px);
                color: white;
            }

            .copyright {
                border-top: 1px solid rgba(255, 255, 255, 0.1);
                padding-top: 1.5rem;
                margin-top: 2rem;
                text-align: center;
                font-size: 0.9rem;
            }
        `;

        // Add footer styles
        const styleSheet = document.createElement('style');
        styleSheet.textContent = footerStyles;
        document.head.appendChild(styleSheet);
    </script>
</body>
</html>